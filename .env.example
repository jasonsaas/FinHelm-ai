# FinHelm.ai Backend Environment Configuration
# Copy this file to .env and configure with your actual values
# DO NOT commit .env to version control

# ======================================
# Convex Configuration
# ======================================
# Your Convex deployment URL (get this from `npx convex dev`)
CONVEX_DEPLOYMENT=

# Convex cloud URL for your deployment
CONVEX_URL=

# ======================================
# Application Configuration
# ======================================
# Environment: development, staging, production
NODE_ENV=development

# Port for the application server
PORT=3000

# ======================================
# Database Configuration
# ======================================
# Only needed for legacy MongoDB support (if using)
DATABASE_URL=

# ======================================
# ERP Integration Credentials
# ======================================
# QuickBooks OAuth Configuration
# Get these from Intuit Developer Dashboard
QUICKBOOKS_CLIENT_ID=
QUICKBOOKS_CLIENT_SECRET=
QUICKBOOKS_REDIRECT_URI=http://localhost:3000/auth/quickbooks/callback
QUICKBOOKS_SANDBOX=true
QUICKBOOKS_DISCOVERY_DOCUMENT=https://appcenter.intuit.com/api/v1

# Sage Intacct OAuth2 Configuration
# Get these from Sage Intacct Developer Portal
SAGE_INTACCT_CLIENT_ID=
SAGE_INTACCT_CLIENT_SECRET=
SAGE_INTACCT_REDIRECT_URI=http://localhost:3000/oauth/sage-intacct/callback
SAGE_INTACCT_DISCOVERY_URL=https://api.intacct.com/oauth2/.well-known/openid_configuration
SAGE_INTACCT_TOKEN_URL=https://api.intacct.com/oauth2/token
SAGE_INTACCT_REVOKE_URL=https://api.intacct.com/oauth2/revoke
SAGE_INTACCT_API_URL=https://api.intacct.com

# Sage Intacct Sandbox URLs
SAGE_INTACCT_SANDBOX_DISCOVERY_URL=https://api-sandbox.intacct.com/oauth2/.well-known/openid_configuration
SAGE_INTACCT_SANDBOX_TOKEN_URL=https://api-sandbox.intacct.com/oauth2/token
SAGE_INTACCT_SANDBOX_API_URL=https://api-sandbox.intacct.com

# Sage Intacct Web Services (Legacy API)
SAGE_INTACCT_SENDER_ID=
SAGE_INTACCT_SENDER_PASSWORD=
SAGE_INTACCT_WEB_SERVICES_ID=
SAGE_INTACCT_WEB_SERVICES_PASSWORD=
SAGE_INTACCT_COMPANY_ID=
SAGE_INTACCT_USER_ID=
SAGE_INTACCT_USER_PASSWORD=
SAGE_INTACCT_BASE_URL=https://api.intacct.com/ia/xml/xmlgw.phtml

# NetSuite Configuration (future)
NETSUITE_ACCOUNT_ID=
NETSUITE_CONSUMER_KEY=
NETSUITE_CONSUMER_SECRET=
NETSUITE_TOKEN_ID=
NETSUITE_TOKEN_SECRET=

# Xero Configuration (future)
XERO_CLIENT_ID=
XERO_CLIENT_SECRET=
XERO_REDIRECT_URI=http://localhost:3000/auth/xero/callback

# ======================================
# AI Configuration
# ======================================
# Grok API for AI reasoning
GROK_API_KEY=
GROK_BASE_URL=https://api.groq.com/v1

# OpenAI (alternative/fallback)
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4

# Anthropic Claude (alternative/fallback)
ANTHROPIC_API_KEY=
ANTHROPIC_MODEL=claude-3-sonnet-20240229

# ======================================
# Security Configuration
# ======================================
# JWT secret for token signing (generate a strong random string)
JWT_SECRET=your-super-secret-jwt-key-here

# Encryption key for sensitive data (32+ character string)
ENCRYPTION_KEY=your-32-character-encryption-key

# Session secret for cookie signing
SESSION_SECRET=your-session-secret-here

# OAuth Token Security
OAUTH_TOKEN_ENCRYPTION_KEY=your-oauth-token-encryption-key-32chars
OAUTH_TOKEN_KEY_VERSION=v1
TOKEN_RETENTION_DAYS=90

# CORS allowed origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,https://app.finhelm.ai

# Role-Based Access Control
RBAC_ENABLED=true
DEFAULT_USER_ROLE=user
COMPLIANCE_AGENT_AUTO_APPROVAL=false

# Compliance and Audit
ENABLE_COMPLIANCE_MONITORING=true
AUDIT_LOG_LEVEL=info
AUDIT_LOG_RETENTION_DAYS=2555
DATA_CLASSIFICATION=confidential
PII_DETECTION_ENABLED=true

# ======================================
# External Integrations
# ======================================
# Email service (for notifications)
SENDGRID_API_KEY=
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
FROM_EMAIL=noreply@finhelm.ai

# Twilio (for SMS notifications)
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=

# Stripe (for subscription billing)
STRIPE_PUBLIC_KEY=
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=

# ======================================
# Monitoring and Analytics
# ======================================
# Application monitoring
SENTRY_DSN=

# Analytics
MIXPANEL_TOKEN=
GOOGLE_ANALYTICS_ID=

# APM (Application Performance Monitoring)
NEW_RELIC_LICENSE_KEY=
DATADOG_API_KEY=

# ======================================
# File Storage
# ======================================
# AWS S3 for file uploads
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
AWS_BUCKET_NAME=finhelm-documents

# Cloudinary (alternative)
CLOUDINARY_CLOUD_NAME=
CLOUDINARY_API_KEY=
CLOUDINARY_API_SECRET=

# ======================================
# Development and Testing
# ======================================
# Enable debug logging
DEBUG=finhelm:*

# Disable HTTPS redirect in development
DISABLE_HTTPS_REDIRECT=true

# Mock data for testing
USE_MOCK_DATA=false

# Test database URL (separate from production)
TEST_DATABASE_URL=

# ======================================
# Rate Limiting
# ======================================
# Requests per minute per IP
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# ======================================
# Feature Flags
# ======================================
# Enable/disable features
ENABLE_AI_AGENTS=true
ENABLE_QUICKBOOKS_INTEGRATION=true
ENABLE_SAGE_INTACCT_INTEGRATION=true
ENABLE_ADVANCED_ANALYTICS=true
ENABLE_AUDIT_LOGGING=true

# ======================================
# Performance Configuration
# ======================================
# Maximum file upload size (in MB)
MAX_UPLOAD_SIZE=10

# Database connection pool size
DB_POOL_SIZE=10

# Cache TTL in seconds
CACHE_TTL=3600

# ======================================
# Security Headers and CORS
# ======================================
# Content Security Policy
CSP_POLICY=default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'

# Trusted proxy IPs (comma-separated)
TRUSTED_PROXIES=127.0.0.1,::1

# ======================================
# Backup and Disaster Recovery
# ======================================
# Automated backup configuration
BACKUP_ENABLED=false
BACKUP_INTERVAL_HOURS=24
BACKUP_S3_BUCKET=finhelm-backups

# ======================================
# IMPORTANT SECURITY NOTES
# ======================================
# 1. Generate strong, unique secrets for production
# 2. Use environment-specific URLs and credentials
# 3. Enable HTTPS in production
# 4. Regularly rotate API keys and secrets
# 5. Use secrets management service in production (AWS Secrets Manager, etc.)
# 6. Never commit .env file to version control
# 7. Use least-privilege access for all service accounts